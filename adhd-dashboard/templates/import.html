{% extends "base.html" %}
{% block title %}ğŸ“¥ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-2xl font-bold text-gray-800">ğŸ“¥ ÙˆØ±ÙˆØ¯ Ø¯Ø§Ø¯Ù‡ Ø§Ø² Gem</h1>
    <p class="text-gray-500">Import Ú©Ø±Ø¯Ù† Task Ù‡Ø§ Ø§Ø² Ø®Ø±ÙˆØ¬ÛŒ JSON</p>
</div>

{% if not notion_configured %}
<div class="bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-xl mb-6">
    âš ï¸ Notion ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡. Ø§ÙˆÙ„ Ø§Ø² Settings Ø§ØªØµØ§Ù„ Ø±Ùˆ Ø¨Ø±Ù‚Ø±Ø§Ø± Ú©Ù†.
    <a href="{{ url_for('settings_page') }}" class="underline">Ø±ÙØªÙ† Ø¨Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</a>
</div>
{% endif %}

<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <!-- ÙˆØ±ÙˆØ¯ÛŒ JSON -->
    <div class="card">
        <h2 class="card-title mb-4">ğŸ“ JSON ÙˆØ±ÙˆØ¯ÛŒ</h2>
        
        <p class="text-sm text-gray-500 mb-4">
            Ø®Ø±ÙˆØ¬ÛŒ JSON Ø§Ø² Gem Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ paste Ú©Ù†. ÙØ±Ù…Øª Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª 
            <code class="bg-gray-100 px-1 rounded">{"tasks": [...]}</code> Ø¨Ø§Ø´Ù‡.
        </p>
        
        <textarea id="json-input" class="input-field w-full font-mono text-sm" rows="15"
                  placeholder='{"tasks": [{"title": "...", "status": "...", ...}]}'></textarea>
        
        <div class="flex gap-2 mt-4">
            <button onclick="parseJSON()" class="btn-primary flex-1">
                ğŸ” Ù¾Ø§Ø±Ø³ Ú©Ù†
            </button>
            <button onclick="loadSampleData()" class="btn-secondary">
                ğŸ“‹ Ù†Ù…ÙˆÙ†Ù‡ Ø¯Ø§Ø¯Ù‡
            </button>
            <button onclick="clearInput()" class="btn-secondary">
                ğŸ—‘ï¸ Ù¾Ø§Ú© Ú©Ù†
            </button>
        </div>
    </div>
    
    <!-- Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ -->
    <div>
        <div class="card mb-4" id="preview-section" style="display: none;">
            <div class="flex items-center justify-between mb-4">
                <h2 class="card-title">ğŸ‘€ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´</h2>
                <span class="text-sm text-gray-500" id="preview-count">0 Ú©Ø§Ø±</span>
            </div>
            
            <div id="preview-list" class="space-y-2 max-h-[400px] overflow-y-auto"></div>
            
            <button onclick="importTasks()" id="import-btn" class="btn-primary w-full mt-4">
                ğŸ“¤ Import Ø¨Ù‡ Notion
            </button>
        </div>
        
        <!-- Ù†ØªÛŒØ¬Ù‡ -->
        <div class="card" id="result-section" style="display: none;">
            <h2 class="card-title mb-4" id="result-title">Ù†ØªÛŒØ¬Ù‡</h2>
            <div id="result-content"></div>
        </div>
        
        <!-- Ø±Ø§Ù‡Ù†Ù…Ø§ -->
        <div class="card">
            <h2 class="card-title mb-4">ğŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§</h2>
            
            <div class="text-sm text-gray-600 space-y-3">
                <p>ÙØ±Ù…Øª JSON Ø¨Ø§ÛŒØ¯ Ø´Ø§Ù…Ù„ Ø¢Ø±Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ø§Ø² Task Ù‡Ø§ Ø¨Ø§Ø´Ù‡:</p>
                
                <pre class="bg-gray-50 p-3 rounded-lg overflow-x-auto text-xs">
{
  "tasks": [
    {
      "title": "Ø¹Ù†ÙˆØ§Ù† Ú©Ø§Ø±",
      "status": "Next Action",
      "context": ["ğŸ’» Ù¾Ø´Øª Ø³ÛŒØ³ØªÙ…"],
      "energy": "ğŸ”¥ High Focus",
      "importance": "ğŸ”´ High",
      "urgency": "ğŸš¨ Urgent",
      "time": "ğŸ• 15 min",
      "quick_win": true,
      "notes": "ØªÙˆØ¶ÛŒØ­Ø§Øª"
    }
  ]
}</pre>
                
                <details class="mt-3">
                    <summary class="cursor-pointer font-medium">Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø¬Ø§Ø²</summary>
                    <div class="mt-2 space-y-2">
                        <p><strong>Status:</strong> Inbox, Next Action, In Progress, Waiting, Done, Someday/Maybe</p>
                        <p><strong>Energy:</strong> ğŸ”¥ High Focus, âš¡ Medium, ğŸª¶ Low Focus</p>
                        <p><strong>Importance:</strong> ğŸ”´ High, ğŸŸ¡ Medium, ğŸŸ¢ Low</p>
                        <p><strong>Urgency:</strong> ğŸš¨ Urgent, â° Soon, ğŸ“… Normal, ğŸ¢ Low</p>
                    </div>
                </details>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/import.js') }}"></script>
{% endblock %}
